import nose.tools as n

from ..parse_mplayer import parse_mplayer

TESTCASES = [
    (131, 'A:   4.3 V:   4.3 A-V:  0.000 ct:  0.014 131/131 12%  6%  1.2% 1 0 \x1b[J'),
    (132, 'A:   4.4 V:   4.4 A-V:  0.000 ct:  0.014 132/132 12%  6%  1.2% 1 0 \x1b[J'),
    (133, 'A:   4.4 V:   4.4 A-V:  0.000 ct:  0.014 133/133 12%  6%  1.2% 1 0 \x1b[J'),
    (134, 'A:   4.4 V:   4.4 A-V:  0.001 ct:  0.014 134/134 12%  6%  1.2% 1 0 \x1b[J'),
    (135, 'A:   4.5 V:   4.5 A-V:  0.000 ct:  0.014 135/135 12%  6%  1.2% 1 0 \x1b[J'),
    (136, 'A:   4.5 V:   4.5 A-V:  0.000 ct:  0.014 136/136 12%  6%  1.2% 1 0 \x1b[J'),
    (137, 'A:   4.5 V:   4.5 A-V:  0.000 ct:  0.014 137/137 12%  6%  1.2% 1 0 \x1b[J'),
    (138, 'A:   4.6 V:   4.6 A-V:  0.000 ct:  0.014 138/138 12%  6%  1.2% 1 0 \x1b[J'),
    (139, 'A:   4.6 V:   4.6 A-V:  0.000 ct:  0.014 139/139 12%  6%  1.2% 1 0 \x1b[J'),
    (140, 'A:   4.6 V:   4.6 A-V:  0.000 ct:  0.014 140/140 12%  6%  1.2% 1 0 \x1b[J'),
    (141, 'A:   4.7 V:   4.7 A-V:  0.000 ct:  0.014 141/141 12%  6%  1.2% 1 0 \x1b[J'),
    (142, 'A:   4.7 V:   4.7 A-V:  0.000 ct:  0.014 142/142 12%  6%  1.2% 1 0 \x1b[J'),
    (143, 'A:   4.7 V:   4.7 A-V:  0.000 ct:  0.014 143/143 12%  6%  1.2% 1 0 \x1b[J'),
    (144, 'A:   4.8 V:   4.8 A-V:  0.000 ct:  0.014 144/144 12%  6%  1.2% 1 0 \x1b[J'),
    (145, 'A:   4.8 V:   4.8 A-V:  0.000 ct:  0.014 145/145 12%  6%  1.2% 1 0 \x1b[J'),
    (146, 'A:   4.8 V:   4.8 A-V:  0.000 ct:  0.014 146/146 12%  6%  1.2% 1 0 \x1b[J'),
    (147, 'A:   4.9 V:   4.9 A-V:  0.000 ct:  0.014 147/147 12%  6%  1.2% 1 0 \x1b[J'),
    (148, 'A:   4.9 V:   4.9 A-V:  0.000 ct:  0.014 148/148 12%  6%  1.2% 1 0 \x1b[J'),
]

def check_parse_mplayer(expectation, stdout_line):
    n.assert_equal(parse_mplayer(stdout_line), expectation)

def test_parse_mplayer():
    for expectation, stdout_line in TESTCASES:
        yield check_parse_mplayer, expectation, stdout_line
